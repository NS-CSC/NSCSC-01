# For more information on configuration, see:
#   * Official English Documentation: http://nginx.org/en/docs/
#   * Official Russian Documentation: http://nginx.org/ru/docs/

user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http{
    server {
        listen 80 ;
        server_name localhost;

        #ssl_certificate /etc/nginx/crt.pem;
        #ssl_certificate_key /etc/nginx/key.pem;

        location /login/ {
            proxy_set_header Host               $host;
            proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Host   $host;
            proxy_set_header X-Forwarded-Server $hostname;
            proxy_set_header X-Real-IP          $remote_addr;

            proxy_pass http://loginpage:3000/;
        }

        location /sql/ {
            proxy_pass http://sql-injection:3000/;
        }

        location /api/login/ {
            proxy_pass http://sql-injection:3000/;
        }

        #access_log /var/log/nginx/access.log;
        #error_log /var/log/nginx/error.log;
    }
}
